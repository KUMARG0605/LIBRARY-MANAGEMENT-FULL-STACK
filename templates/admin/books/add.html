{% extends "base.html" %}

{% block title %}Add New Book - Admin Panel{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <!-- Header -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2><i class="fas fa-plus-circle me-2"></i>Add New Book</h2>
                <a href="{{ url_for('admin.books') }}" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-left me-2"></i>Back to Books
                </a>
            </div>

            <!-- Form Card -->
            <div class="card shadow">
                <div class="card-body p-4">
                    <form method="POST" action="{{ url_for('admin.add_book') }}" enctype="multipart/form-data">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                        
                        <!-- Basic Information -->
                        <h5 class="mb-3"><i class="fas fa-info-circle me-2"></i>Basic Information</h5>
                        <div class="row mb-4">
                            <div class="col-md-6 mb-3">
                                <label for="isbn" class="form-label">ISBN <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="isbn" name="isbn" required 
                                       placeholder="978-3-16-148410-0">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="title" class="form-label">Book Title <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="title" name="title" required 
                                       placeholder="Enter book title">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="author" class="form-label">Author <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="author" name="author" required 
                                       placeholder="Author name">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="publisher" class="form-label">Publisher</label>
                                <input type="text" class="form-control" id="publisher" name="publisher" 
                                       placeholder="Publisher name">
                            </div>
                        </div>

                        <!-- Classification -->
                        <h5 class="mb-3"><i class="fas fa-tags me-2"></i>Classification</h5>
                        <div class="row mb-4">
                            <div class="col-md-6 mb-3">
                                <label for="category" class="form-label">Category <span class="text-danger">*</span></label>
                                <select class="form-select" id="category" name="category" required>
                                    <option value="">Select Category</option>
                                    {% for cat in categories %}
                                    <option value="{{ cat.id }}">{{ cat.name }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="department" class="form-label">Department</label>
                                <select class="form-select" id="department" name="department">
                                    <option value="">Select Department</option>
                                    {% for dept in departments %}
                                    <option value="{{ dept.id }}">{{ dept.name }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="language" class="form-label">Language</label>
                                <select class="form-select" id="language" name="language">
                                    <option value="English">English</option>
                                    <option value="Hindi">Hindi</option>
                                    <option value="Tamil">Tamil</option>
                                    <option value="Telugu">Telugu</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="shelf_location" class="form-label">Shelf Location</label>
                                <input type="text" class="form-control" id="shelf_location" name="shelf_location" 
                                       placeholder="e.g., A-23">
                            </div>
                        </div>

                        <!-- Publication Details -->
                        <h5 class="mb-3"><i class="fas fa-book-open me-2"></i>Publication Details</h5>
                        <div class="row mb-4">
                            <div class="col-md-4 mb-3">
                                <label for="publication_year" class="form-label">Publication Year</label>
                                <input type="number" class="form-control" id="publication_year" 
                                       name="publication_year" min="1900" max="2100" 
                                       placeholder="2024">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="pages" class="form-label">Pages</label>
                                <input type="number" class="form-control" id="pages" name="pages" 
                                       min="1" placeholder="320">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="edition" class="form-label">Edition</label>
                                <input type="text" class="form-control" id="edition" name="edition" 
                                       placeholder="1st Edition">
                            </div>
                        </div>

                        <!-- Inventory -->
                        <h5 class="mb-3"><i class="fas fa-warehouse me-2"></i>Inventory</h5>
                        <div class="row mb-4">
                            <div class="col-md-6 mb-3">
                                <label for="total_copies" class="form-label">Total Copies <span class="text-danger">*</span></label>
                                <input type="number" class="form-control" id="total_copies" 
                                       name="total_copies" min="1" value="1" required>
                                <small class="form-text text-muted">Number of copies to add to library</small>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="price" class="form-label">Price (â‚¹)</label>
                                <input type="number" class="form-control" id="price" name="price" 
                                       min="0" step="0.01" placeholder="499.00">
                            </div>
                        </div>

                        <!-- Description -->
                        <h5 class="mb-3"><i class="fas fa-align-left me-2"></i>Description</h5>
                        <div class="mb-4">
                            <textarea class="form-control" id="description" name="description" 
                                      rows="4" placeholder="Brief description of the book..."></textarea>
                        </div>

                        <!-- Cover Image -->
                        <h5 class="mb-3"><i class="fas fa-image me-2"></i>Cover Image</h5>
                        <div class="mb-4">
                            <input type="file" class="form-control" id="cover_image" 
                                   name="cover_image" accept="image/*">
                            <small class="form-text text-muted">Recommended size: 300x400px (JPG, PNG)</small>
                        </div>

                        <!-- Submit Buttons -->
                        <div class="d-flex gap-2 justify-content-end">
                            <a href="{{ url_for('admin.books') }}" class="btn btn-outline-secondary">
                                <i class="fas fa-times me-2"></i>Cancel
                            </a>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save me-2"></i>Add Book
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
